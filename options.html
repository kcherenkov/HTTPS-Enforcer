<!doctype html>
<html>
<head>
    <title id="optionsTitle"></title>
    <link href="css/main.css" rel="stylesheet">
    <style>
        fieldset {
            margin: 2em;
            border-radius: 5px;
        }
    </style>
    <script>
        var $ = function(id) {
            return document.getElementById(id);
        };
        var storage = chrome.extension.getBackgroundPage().localStorage;

        function ListenOnchange(id) {
            if (storage[id] === 'true')
                $(id).checked = 'checked';
            $(id).onchange = function() {
                storage[id] = this.checked;
            };
        }

        window.onload = function() {
            ListenOnchange('enableXhr');
            ListenOnchange('sendNewSite');
            ListenOnchange('secureCookies');
            ListenOnchange('checkBeforeRedirect');

            $('enableXhrL').innerText = ' ' + chrome.i18n.getMessage("enableXhr");
            $('sendNewSiteL').innerText = ' ' + chrome.i18n.getMessage("sendNewSite");
            $('secureCookiesL').innerText = ' ' + chrome.i18n.getMessage("secureCookies");
            $('checkBeforeRedirectL').innerText = ' ' + chrome.i18n.getMessage("checkBeforeRedirect");
            $('optionsHeader').innerText = chrome.i18n.getMessage("optionsHeader");
            $('optionsTitle').innerText = chrome.i18n.getMessage("optionsTitle");
        }
    </script>
</head>
<body>
<header>
    <h1 id="optionsHeader"></h1>
</header>
<div id="content">
    <fieldset>
        <p><input type="checkbox" id="enableXhr"/><label id="enableXhrL" for="enableXhr"></label></p>

        <p><input type="checkbox" id="sendNewSite"/><label id="sendNewSiteL" for="sendNewSite"></label></p>

        <p><input type="checkbox" id="secureCookies"/><label id="secureCookiesL" for="secureCookies"></label></p>

        <p><input type="checkbox" id="checkBeforeRedirect"/><label id="checkBeforeRedirectL" for="checkBeforeRedirect"></label></p>
    </fieldset>
</div>
</body>
</html>